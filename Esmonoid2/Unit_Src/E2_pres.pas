Unit E2_Pres;
Interface

Procedure Presentacion;

Implementation
Uses
  Crt,
  Fade,
  Palette,
  Xlib2,
  XBm2;

Const
  P : Array [0..(44*12)+1] of Byte =
  ( 44,12,
  000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,
  000,000,000,000,000,000,000,000,000,000,000,000,000,
  223,223,223,223,223,223,223,000,000,223,223,223,223,223,223,223,223,000,223,223,000,000,000,000,223,223,000,223,223,223,223,
  223,223,223,223,000,223,223,000,000,000,000,000,000,
  223,223,223,223,223,223,223,223,000,223,223,223,223,223,223,223,223,000,223,223,000,000,000,000,223,223,000,223,223,223,223,
  223,223,223,223,000,223,223,000,000,000,000,000,000,
  223,223,000,000,000,000,223,223,000,000,000,000,223,223,000,000,000,000,223,223,223,000,000,223,223,223,000,223,223,000,000,
  000,000,000,000,000,223,223,000,000,000,000,000,000,
  223,223,000,000,000,000,223,223,000,000,000,000,223,223,000,000,000,000,000,223,223,223,223,223,223,000,000,223,223,000,000,
  000,000,000,000,000,223,223,000,000,000,000,000,000,
  223,223,223,223,223,223,223,223,000,000,000,000,223,223,000,000,000,000,000,000,223,223,223,223,000,000,000,223,223,223,223,
  223,223,223,000,000,223,223,000,000,000,000,000,000,
  223,223,223,223,223,223,223,000,000,000,000,000,223,223,000,000,000,000,000,000,223,223,223,223,000,000,000,223,223,223,223,
  223,223,223,000,000,223,223,000,000,000,000,000,000,
  223,223,000,000,000,000,000,000,000,000,000,000,223,223,000,000,000,000,000,223,223,223,223,223,223,000,000,223,223,000,000,
  000,000,000,000,000,223,223,000,000,000,000,000,000,
  223,223,000,000,000,000,000,000,000,000,000,000,223,223,000,000,000,000,223,223,223,000,000,223,223,223,000,223,223,000,000,
  000,000,000,000,000,223,223,000,000,000,000,000,000,
  223,223,000,000,000,000,000,000,000,223,223,223,223,223,223,223,223,000,223,223,000,000,000,000,223,223,000,223,223,223,223,
  223,223,223,223,000,223,223,223,223,223,223,223,223,
  223,223,000,000,000,000,000,000,000,223,223,223,223,223,223,223,223,000,223,223,000,000,000,000,223,223,000,223,223,223,223,
  223,223,223,223,000,223,223,223,223,223,223,223,223,
  000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,
  000,000,000,000,000,000,000,000,000,000,000,000,000
  );

  M : Array [0..64*10+1] of byte =
  ( 64,10,
    000,223,223,000,000,000,000,223,223,000,000,223,223,223,223,223,223,000,000,000,223,223,223,223,223,223,223,000,223,223,
    223,223,223,223,223,223,000,223,223,223,223,223,223,223,223,000,223,223,223,223,223,223,223,000,000,000,223,223,223,223,
    223,223,223,000,

    000,223,223,223,000,000,223,223,223,000,223,223,223,223,223,223,223,223,000,223,223,223,223,223,223,223,223,000,223,223,
    223,223,223,223,223,223,000,223,223,223,223,223,223,223,223,000,223,223,223,223,223,223,223,223,000,223,223,223,223,223,
    223,223,223,000,

    000,223,223,223,000,000,223,223,223,000,223,223,000,000,000,000,223,223,000,223,223,000,000,000,000,000,000,000,000,000,
    000,223,223,000,000,000,000,223,223,000,000,000,000,000,000,000,223,223,000,000,000,000,223,223,000,223,223,000,000,000,
    000,000,000,000,

    000,223,223,223,223,223,223,223,223,000,223,223,000,000,000,000,223,223,000,223,223,000,000,000,000,000,000,000,000,000,
    000,223,223,000,000,000,000,223,223,000,000,000,000,000,000,000,223,223,000,000,000,000,223,223,000,223,223,000,000,000,
    000,000,000,000,

    000,223,223,000,223,223,000,223,223,000,223,223,223,223,223,223,223,223,000,223,223,223,223,223,223,223,000,000,000,000,
    000,223,223,000,000,000,000,223,223,223,223,223,223,223,000,000,223,223,223,223,223,223,223,223,000,223,223,223,223,223,
    223,223,000,000,

    000,223,223,000,223,223,000,223,223,000,223,223,223,223,223,223,223,223,000,000,223,223,223,223,223,223,223,000,000,000,
    000,223,223,000,000,000,000,223,223,223,223,223,223,223,000,000,223,223,223,223,223,223,223,000,000,000,223,223,223,223,
    223,223,223,000,

    000,223,223,000,000,000,000,223,223,000,223,223,000,000,000,000,223,223,000,000,000,000,000,000,000,223,223,000,000,000,
    000,223,223,000,000,000,000,223,223,000,000,000,000,000,000,000,223,223,000,223,223,223,000,000,000,000,000,000,000,000,
    000,223,223,000,

    000,223,223,000,000,000,000,223,223,000,223,223,000,000,000,000,223,223,000,000,000,000,000,000,000,223,223,000,000,000,
    000,223,223,000,000,000,000,223,223,000,000,000,000,000,000,000,223,223,000,000,223,223,223,000,000,000,000,000,000,000,
    000,223,223,000,

    000,223,223,000,000,000,000,223,223,000,223,223,000,000,000,000,223,223,000,223,223,223,223,223,223,223,223,000,000,000,
    000,223,223,000,000,000,000,223,223,223,223,223,223,223,223,000,223,223,000,000,000,223,223,223,000,223,223,223,223,223,
    223,223,223,000,

    000,223,223,000,000,000,000,223,223,000,223,223,000,000,000,000,223,223,000,223,223,223,223,223,223,223,000,000,000,000,
    000,223,223,000,000,000,000,223,223,223,223,223,223,223,223,000,223,223,000,000,000,000,223,223,000,223,223,223,223,223,
    223,223,000,000
  );

Var
  Velocidad : Word;
  Pixel,
  Masters   : Array [1..2000] of byte;

Procedure Init_Images;
Begin
  XBmtoPbm (P, Pixel  );
  XBmtoPbm (M, Masters);
End;

Procedure Mover_Pixel;
Var
  Y   : Integer;
Begin
  Y := 0;
  Velocidad := 45;
  XPutPbmClipY (100,Y,0,Pixel);
  Repeat
    Inc (Y);
    XPutPbmClipY (100,Y,0,Pixel);
    Delay (Velocidad);
    If Y > 45 then
      Dec (Velocidad);
  until Y = 85;
  Velocidad := 35;
  repeat
    Dec (Y);
    XPutPbmClipY (100,Y,0,Pixel);
    Delay (Velocidad);
    If Y < 85 then
      Inc (Velocidad,3);
  until Y = 65;
  repeat
    Inc (Y);
    XPutPbmClipY (100,Y,0,Pixel);
    Delay (Velocidad);
    If Y > 65 then
      Dec (Velocidad,3);
  until Y = 85;
End;

Procedure Mover_Masters;
Var
  X : Integer;
Begin
  X := 320;
  Repeat
    Dec (X);
    XPutPbmClipX (X,86,0,Masters);
    XCpVidRect (0,86,5,97, 0,86, NonVisualOffs,0, 320,320);
    Delay (15);
  until X = 150;
End;

Procedure Lineas;
Var
  X1,X2  : Integer;
Begin
  X1 := 99;
  X2 := 213;
  repeat
    XPutPix (X1,81,0,223);
    XPutPix (X2,100,0,223);
    Inc (X1);
    Dec (X2);
    Delay (10);
  until X1 = 214;
End;

Procedure Entertainment;
Var
  X,I,J : Word;
  S     : String;
  Font      : Pointer;
begin
  InstallFont ('DATA\E2_Font.Dat',988,1247,Font);
  XTextInit;
  XRegisterUserFont (Font^);
  XSetFont (2);
  S := 'EntertainmenT';
  X := 98;
  For I := 1 to Length(S) do begin
    For J := 200 to 223 do begin
      XPrintf (X,103,0,J,S[I]);
      delay (25);
     end;
    Inc (X,9);
    end;
  FreeMem (Font,1247);
end;

Procedure Mostrar_Pixel_Masters;
Begin
  Mover_Pixel;
  Mover_Masters;
  Lineas;
  Entertainment;
  Readkey;
  Fade_Out (25);
  ClearDevice;
End;

Procedure Presenta;
Var
  Font : Pointer;
Begin
  InstallFont ('DATA\E2_Font.Dat',988,1247,Font);
  XTextInit;
  XRegisterUserFont (Font^);
  XSetFont (2);
  XPrintf (123,80,0,223,'PRESENTA');
  Fade_In (25);
  readkey;
  Fade_Out (25);
  ClearDevice;
  FreeMem (Font,1247);
End;

Procedure Presentacion;
Begin
{$IFDEF Pres}
  Init_Images;
  Mostrar_Pixel_Masters;
  Presenta;
{$ENDIF}
End;

End.